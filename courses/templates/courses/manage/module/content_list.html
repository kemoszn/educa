{% extends "base.html" %}
{% load course %}
{% block title %}
Module {{ module.order|add:1 }}: {{ module.title }}
{% endblock %}
{% block content %}
{% with course=module.course %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb"  style="font-size: 20px;">
    <li class="breadcrumb-item"><a href="{% url "course_list" %}">Home</a></li>
    <li class="breadcrumb-item"><a href="{% url "manage_course_list" %}">Course Mangement</a></li>
    <li class="breadcrumb-item active" aria-current="page">Course "{{ course.title }}"</li>
  </ol>
</nav>
<!-- new -->
<div class="accordion" id="accordionExample">
{% for m in course.modules.all %}
  <div class="card">
    <div class="card-header" id="heading{{ m.id }}">
      <h2 class="mb-0">
        <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapse{{ m.id }}" aria-expanded="true" aria-controls="collapse{{ m.id }}">
          <li style="list-style-type: none;" data-id="{{ m.id }}" {% if m == module %} class="selected" {% endif %}>
            <a href="{% url "module_content_list" m.id %}">
                <span>
            <span class="order">{{ m.order|add:1 }}.</span>
                </span>
                {{ m.title }}
            </a>
        </li>
        </button>
      </h2>
    </div>

    <div id="collapse{{ m.id }}" {% if m == module %}  class="collapse show" {% else %} class="collapse hide" {% endif %} aria-labelledby="heading{{ m.id }}" data-parent="#accordionExample">
      <div class="card-body">
    <div id="module-contents">
        {% for content in module.contents.all %}
        <div data-id="{{ content.id }}">
            {% with item=content.item %}
            <p>{{ item }} ({{ item|model_name }})</p>
            <a href="{% url "module_content_update" module.id item|model_name item.id%}"><button type="button" class="btn btn-primary" style="border-radius:5px;
    font-size:13px;
    text-transform:uppercase;
    border:none;
    padding:10px 20px;
    margin:20px 0;">Edit </button></a> 
            <form action="{% url "module_content_delete" content.id %}" method="post">
                <input type="submit" class="button" value="Delete">
                {% csrf_token %}
            </form>
            {% endwith %}
        </div>
        {% empty %}
        <p>This module has no contents yet.</p>
        {% endfor %}
    </div> <br>
    <h4>Add new content:</h4>
    <ul class="content-types">
        <li><a href="{% url "module_content_create" module.id "text" %}">
                Text</a></li>
        <li><a href="{% url "module_content_create" module.id "image" %}">
                Image</a></li>
        <li><a href="{% url "module_content_create" module.id "embedvideo" %}">
                Embed Video</a></li>
        <li><a href="{% url "module_content_create" module.id "file" %}">
                File</a></li>
    </ul>
</div>
    </div>
  </div>
  {% endfor %}
  </div>
  <br>
{% endwith %}
{% endblock %}
{% block domready %}
{% endblock %}